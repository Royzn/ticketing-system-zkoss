<?init class="org.zkoss.zk.ui.util.Composition" arg0="template.zul" ?>
<zk>
    <window title="📝 Create / Edit Ticket" border="normal" width="550px"
            style="border-radius:12px; background:#ffffff; box-shadow:0 2px 8px rgba(0,0,0,0.1);"
            self="@define(content)"
            apply="org.zkoss.bind.BindComposer"
            viewModel="@id('vm') @init('latihan.controller.TicketFormController')"> <vlayout spacing="25px" style="padding:5px;">
        <label value="Fill in the ticket information below"
               style="color:#7f8c8d; font-size:14px; margin-bottom:10px;"/>

        <grid width="100%">
            <columns>
                <column width="120px"/>
                <column width="*"/>
            </columns>
            <rows>
                <row>
                    <label value="Title:" style="font-weight:bold; text-align:right;" width="120px"/>
                    <textbox width="325px" placeholder="Enter ticket title"
                             value="@bind(vm.currentTicket.title)"/>
                </row>
                <row>
                    <label value="Description:" style="font-weight:bold; text-align:right;" width="120px"/>
                    <textbox multiline="true" rows="4" width="325px"
                             placeholder="Describe the issue"
                             value="@bind(vm.currentTicket.description)"/>
                </row>
                <row>
                    <label value="Priority:" style="font-weight:bold; text-align:right;" width="120px"/>
                    <combobox width="325px" placeholder="Select priority" readonly="true"
                              model="@load(vm.priorityOptions)"
                              selectedItem="@bind(vm.currentTicket.priority)">
                        <template name="model">
                            <comboitem label="@load(vm.getPriorityLabelText(each))" value="@load(each)"/>
                        </template>
                    </combobox>
                </row>
                <row>
                    <label value="Assign To:" style="font-weight:bold; text-align:right;" width="120px"/>
                    <combobox width="325px" placeholder="Select Assignee" readonly="true"
                              model="@load(vm.agentOptions)"
                              selectedItem="@bind(vm.selectedAgent)">
                        <template name="model">
                            <comboitem label="@load(each.name)" value="@load(each)"/>
                        </template>
                    </combobox>
                </row>
                <row>
                    <label value="Requester:" width="120px" style="font-weight:bold;"/>
                    <textbox width="325px" placeholder="Requester name"
                             value="@bind(vm.currentTicket.requester)"/>
                </row>
            </rows>
        </grid>

        <hlayout spacing="15px" style="margin-top:15px; justify-content:center;">
            <button label="💾 Save" onClick="@command('saveTicket')"
                    style="background:#2ecc71; color:white; font-weight:bold; border:none;
                               padding:8px 20px; border-radius:6px;"/>
            <button label="❌ Cancel" href="tickets.zul"
                    style="background:#e74c3c; color:white; font-weight:bold; border:none;
                               padding:8px 20px; border-radius:6px;"/>
        </hlayout>
    </vlayout>
    </window>
</zk>