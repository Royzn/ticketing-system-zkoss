<?init class="org.zkoss.zk.ui.util.Composition" arg0="template.zul" ?>
<zk>
    <window self="@define(content)" border="none"
            apply="org.zkoss.bind.BindComposer"
            viewModel="@id('vm') @init('latihan.controller.TicketDetailController')">

        <div style="height:100%; overflow:auto; padding:20px;">
            <vlayout spacing="20px">
                <label value="🎟 Ticket Detail"
                       style="font-weight:bold; font-size:22px; color:#2c3e50;"/>

                <groupbox mold="3d" width="100%" style="background:#ffffff; border-radius:10px;"
                          visible="@load(not empty vm.ticket)">
                    <caption label="Ticket Information" style="font-weight:bold; color:#2c3e50;"/>
                    <grid width="700px" style="padding:15px;">
                        <rows>
                            <row>
                                <label value="Ticket ID:" style="font-weight:bold; width:150px;"/>
                                <label value="@load(vm.ticket.id)"/>
                            </row>
                            <row>
                                <label value="Title:" style="font-weight:bold;"/>
                                <label value="@load(vm.ticket.title)"/>
                            </row>
                            <row>
                                <label value="Description:" style="font-weight:bold;"/>
                                <label value="@load(vm.ticket.description)" multiline="true"/>
                            </row>

                            <row>
                                <label value="Status:" style="font-weight:bold;"/>
                                <label value="@load(vm.statusLabel)" style="font-weight:bold;"/>
                            </row>
                            <row>
                                <label value="Priority:" style="font-weight:bold;"/>
                                <label value="@load(vm.priorityLabel)" style="color:#c0392b; font-weight:bold;"/>
                            </row>
                            <row>
                                <label value="Assigned To:" style="font-weight:bold;"/>
                                <label value="@load(vm.getAssignedToName(vm.ticket.assignedTo))"/>
                            </row>
                            <row>
                                <label value="Requester:" style="font-weight:bold;"/>
                                <label value="@load(vm.ticket.requester)"/>
                            </row>
                            <row>
                                <label value="Created Date:" style="font-weight:bold;"/>
                                <label value="@load(vm.formattedCreatedDate)"/>
                            </row>
                            <row>
                                <label value="Last Updated:" style="font-weight:bold;"/>
                                <label value="@load(vm.formattedUpdatedDate)"/>
                            </row>
                        </rows>
                    </grid>
                </groupbox>

                <div visible="@load(empty vm.ticket)" style="padding:20px; text-align:center;">
                    <label value="Ticket not found." style="font-size:16px; color:red;"/>
                </div>

                <hlayout spacing="10px">
                    <button label="⬅ Back"
                            href="tickets.zul"
                            tooltiptext="Go back to user list"
                            style="background-color:#007bff; color:white; border-radius:6px;"/>
                    <button label="✏ Edit" onClick="@command('editTicket')"
                            style="background:#f39c12; color:white; border-radius:6px;"/>
                    <button label="🔄 Change Status" onClick="@command('changeStatus')"
                            disabled="@load(vm.changeStatusDisabled)"
                            style="background:#3498db; color:white; border-radius:6px;"/>
                    <button label="🗑 Delete" onClick="@command('deleteTicket')"
                            style="background:#e74c3c; color:white; border-radius:6px;"/>
                </hlayout>

            </vlayout>
        </div>
    </window>
</zk>